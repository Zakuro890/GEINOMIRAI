<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>お問い合わせフォーム</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"> -->
    <style>
        .modal {
            display: none;
        }
        .modal.show {
            display: block;
        }
        .no-scroll {
            overflow: hidden;
        }
    </style>
</head>
<body>

<div id="container">

<header>
<h1 id="logo"><a href="index.html">GEINOMIRAI</a></h1><!--開閉ブロック-->
<div id="menubar">
<nav>
    <ul>
      <li><a href="index.html">HOME</a></li>
      <li><a href="DAT.html">データベース</a></li>
      <li><a href="company.html">掲示板</a></li>
      <li><a href="Quiz/QuizTop.html">伝統クイズ</a></li>
      <li><a href="contact.html">お問い合わせ</a></li>
    </ul>
</nav>
</div>
<!--/#menubar-->
</header>
<style>
  .contact-form {
      max-width: 600px;
      margin: 40px auto;
      padding: 30px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
  }
  
  .form-title {
      font-size: 24px;
      color: #333;
      text-align: center;
      margin-bottom: 20px;
  }
  
  .form-description {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
      line-height: 1.6;
  }
  
  .form-group {
      margin-bottom: 20px;
  }
  
  .form-label {
      display: block;
      margin-bottom: 8px;
      color: #444;
      font-weight: 500;
  }
  
  .required {
      background: #ff4757;
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 12px;
      margin-left: 8px;
  }
  
  .form-input {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      transition: all 0.3s;
  }
  
  .form-input:focus {
      border-color: #4a90e2;
      box-shadow: 0 0 0 3px rgba(74,144,226,0.1);
      outline: none;
  }
  
  textarea.form-input {
      min-height: 120px;
      resize: vertical;
  }
  
  .checkbox-group {
      display: flex;
      align-items: center;
      margin: 20px 0;
  }
  
  .checkbox-group input[type="checkbox"] {
      margin-right: 10px;
  }
  
  .policy-button {
      background: none;
      border: none;
      color: #4a90e2;
      text-decoration: underline;
      cursor: pointer;
      padding: 0 4px;
  }
  
  .submit-button {
      display: block;
      width: 200px;
      margin: 30px auto 0;
      padding: 12px;
      background: #4a90e2;
      color: white;
      border: none;
      border-radius: 25px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s;
  }
  
  .submit-button:hover {
      background: #357abd;
      transform: translateY(-2px);
  }
  
  .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
  }
  
  .modal-content {
      position: relative;
      background: white;
      width: 90%;
      max-width: 500px;
      margin: 50px auto;
      padding: 30px;
      border-radius: 12px;
      max-height: 80vh;
      overflow-y: auto;
  }
  
  .modal-close {
      position: absolute;
      right: 20px;
      top: 20px;
      background: #4a90e2;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
  }
  .form-input.error {
    border-color: #ff4757;
    background-color: #fff8f8;
}

.error-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.error-content {
    background: white;
    padding: 20px;
    border-radius: 8px;
    max-width: 400px;
    width: 90%;
}

.error-content h3 {
    color: #ff4757;
    margin-bottom: 15px;
}

.error-content ul {
    list-style: none;
    padding: 0;
    margin: 0 0 15px 0;
}

.error-content li {
    color: #666;
    margin-bottom: 8px;
    padding-left: 20px;
    position: relative;
}

.error-content button {
    background: #4a90e2;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
}
  </style>
  
  <form id="contactForm" class="contact-form" action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSexnHISQwBFam8cuYEfRfRZNg_3Mrqc-5jGGvWN6Nc39uj5lA/formResponse" method="post">
      <h2 class="form-title">お問い合わせフォーム</h2>
      <p class="form-description">お問い合わせの方法は、以下のフォームよりご連絡ください。<br>担当者がメールにて返信し、各種対応をご連絡いたします。</p>
      
      <div class="form-group">
          <label class="form-label" for="name">お名前 <span class="required">必須</span></label>
          <input class="form-input" type="text" id="name" name="entry.1921497181" placeholder="例：山田 太郎" required>
      </div>
  
      <div class="form-group">
          <label class="form-label" for="phone">電話番号 <span class="required">必須</span></label>
          <input class="form-input" type="tel" id="phone" name="entry.11885088" placeholder="例：01234567890（ハイフンなし）" required>
      </div>
  
      <div class="form-group">
          <label class="form-label" for="email">メールアドレス <span class="required">必須</span></label>
          <input class="form-input" type="email" id="email" name="entry.864046591" placeholder="例：sample@sample.com" required>
      </div>
  
      <div class="form-group">
          <label class="form-label" for="message">お問い合わせ内容 <span class="required">必須</span></label>
          <textarea class="form-input" id="message" name="entry.1922750848" placeholder="ご自由にご記入ください" required></textarea>
      </div>
  
      <div class="checkbox-group">
          <input type="checkbox" id="agree" required>
          <label for="agree">個人情報取扱方針に同意する</label>
          <button type="button" class="policy-button" onclick="openModal()">（確認する）</button>
      </div>
  
      <button type="submit" class="submit-button">送信する</button>
  </form>
  
  <div id="modal" class="modal">
    <div class="modal-content">
        <h3>個人情報取扱方針</h3>
        <p class="mb-4"><strong>1. 個人情報の収集について</strong><br>
        当サイトでは、お問い合わせフォームにGoogleフォームを使用しています。フォームをご利用いただく際に、以下の個人情報を収集する場合があります。
        <ul class="list-disc pl-5">
            <li>氏名</li>
            <li>メールアドレス</li>
            <li>電話番号</li>
            <li>その他、お問い合わせ内容に関連する情報</li>
        </ul>
        </p>
        <p class="mb-4"><strong>2. 個人情報の利用目的について</strong><br>
        収集した個人情報は、以下の目的で利用いたします。
        <ul class="list-disc pl-5">
            <li>お問い合わせへの対応およびその確認</li>
            <li>サービスの改善および向上</li>
            <li>必要に応じたご連絡</li>
        </ul>
        </p>
        <p class="mb-4"><strong>3. 個人情報の第三者提供について</strong><br>
        取得した個人情報は、以下の場合を除き、第三者に提供することはありません。
        <ul class="list-disc pl-5">
            <li>ご本人の同意がある場合</li>
            <li>法令に基づく場合</li>
            <li>人命、身体または財産の保護のために必要な場合で、ご本人の同意を得ることが困難な場合</li>
        </ul>
        </p>
        <p class="mb-4"><strong>4. Googleフォームの利用について</strong><br>
        当サイトは、お問い合わせフォームとしてGoogleフォームを利用しています。Googleフォームで提供された個人情報はGoogleのサーバーに保存され、Googleのプライバシーポリシーに従って管理されます。Googleのプライバシーポリシーについては、こちらをご参照ください。
        </p>
        <p class="mb-4"><strong>5. 個人情報の管理について</strong><br>
        当サイトは、個人情報の漏洩、紛失、改ざんを防ぐため、適切な管理措置を講じます。また、個人情報の正確性および最新性を保つために、必要な対策を実施します。
        </p>
        <p class="mb-4"><strong>6. 個人情報の開示・訂正・削除について</strong><br>
        ご本人からの個人情報の開示、訂正、削除のご依頼があった場合は、速やかに対応いたします。具体的な手続きにつきましては、お問い合わせフォームからご連絡ください。
        </p>
        <button class="modal-close" onclick="closeModal()">閉じる</button>
    </div>
</div>




<script>
document.getElementById("contactForm").addEventListener("submit", function(event) {
    event.preventDefault();

    const form = {
        name: {
            value: document.getElementById("name").value.trim(),
            pattern: /^[\u4e00-\u9faf\u3040-\u309f\u30a0-\u30ff\sa-zA-Z]+$/,
            message: "お名前は文字のみ入力可能です"
        },
        phone: {
            value: document.getElementById("phone").value.trim(),
            pattern: /^[0-9]{10,11}$/,
            message: "電話番号は10桁または11桁の数字で入力してください"
        },
        email: {
            value: document.getElementById("email").value.trim(),
            pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
            message: "有効なメールアドレスを入力してください"
        },
        message: {
            value: document.getElementById("message").value.trim(),
            minLength: 10,
            message: "お問い合わせ内容は10文字以上入力してください"
        },
        agree: {
            value: document.getElementById("agree").checked,
            message: "個人情報取扱方針への同意が必要です"
        }
    };

    const errors = [];

    // 必須チェック
    for (const [key, field] of Object.entries(form)) {
        const element = document.getElementById(key);
        
        // 値が空またはチェックボックスが未チェックの場合
        if (!field.value || (key === 'agree' && !field.value)) {
            const fieldName = key === 'agree' ? '個人情報取扱方針への同意' : 
                            element.previousElementSibling.textContent.replace(' 必須', '');
            errors.push(`${fieldName}は必須項目です`);
            element.classList.add('error');
        }

        // パターンチェック
        if (field.value && field.pattern && !field.pattern.test(field.value)) {
            errors.push(field.message);
            element.classList.add('error');
        }

        // メッセージの長さチェック
        if (key === 'message' && field.value && field.value.length < field.minLength) {
            errors.push(field.message);
            element.classList.add('error');
        }
    }

    if (errors.length > 0) {
        showErrorModal(errors);
        return false;
    }

    this.submit();
});

// エラーモーダル表示とリセット機能の追加
function showErrorModal(errors) {
    const existingModal = document.querySelector('.error-modal');
    if (existingModal) existingModal.remove();

    const errorDiv = document.createElement('div');
    errorDiv.className = 'error-modal';
    errorDiv.innerHTML = `
        <div class="error-content">
            <h3>入力エラー</h3>
            <ul>${errors.map(error => `<li>${error}</li>`).join('')}</ul>
            <button onclick="closeErrorModal(this)">閉じる</button>
        </div>
    `;
    document.body.appendChild(errorDiv);
}

function closeErrorModal(button) {
    button.closest('.error-modal').remove();
}

// 入力フィールドのエラー状態をリセット
document.querySelectorAll('.form-input').forEach(input => {
    input.addEventListener('input', function() {
        this.classList.remove('error');
    });
});

document.getElementById('agree').addEventListener('change', function() {
    this.classList.remove('error');
});

function openModal() {
    document.getElementById('modal').classList.add('show');
    document.body.classList.add('no-scroll');
}

function closeModal() {
    document.getElementById('modal').classList.remove('show');
    document.body.classList.remove('no-scroll');
}
</script>
<!--/#contents-->
</div>
<ul id="footermenu">
  <li><a href="index.html">HOME</a></li>
  <li><a href="DAT.html">データベース</a></li>
  <li><a href="company.html">掲示板</a></li>
  <li><a href="contact.html">お問い合わせ</a></li>
</ul>

<div class="footer">
  &copy; 2024 GEINOMIRAI
</div>

</div>
<!--/#container-->

<!--開閉ボタン（ハンバーガーアイコン）-->
<div id="menubar_hdr">
  <span></span><span></span><span></span>
</div>

<!--jQueryの読み込み-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="js/main.js"></script>
<script src="js/jquery.inview_set.js"></script>
</body>
</html>
